<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device", initial-scale="1.0">
        <title>Blog|<%= title%></title>
        <%- include('../partials/header.ejs')%>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    </head>

<body>
    <%- include('../partials/nav.ejs')%>
    
    
    <div class="details content">
        <h2><%= blog.title %></h2>
        <div class="content">
           <p><%= blog.body %> </p>
        </div>
        <a class="delete" data-doc="<%= blog._id%>"><i class="bi bi-trash"></i></a>

    </div>

    
</body>
<%- include('../partials/footer.ejs')%>

<script>
    const trashcan = document.querySelector('a.delete');

    trashcan.addEventListener('click',(e)=>{
        const endpoint= `/blogs/${trashcan.dataset.doc}`;

        fetch(endpoint,{
            method: 'DELETE'
        })
        .then((response)=>{
            return response.json()
        })
        .then((data)=> {
            window.location.href = data.redirect;
        })
        .catch((err)=> {
            console.log(err);
        })
    })
</script>



</html>